"use strict";(self.webpackChunkstock_flow_web=self.webpackChunkstock_flow_web||[]).push([[945],{7326:(O,d,s)=>{s.r(d),s.d(d,{ViewProductDetailsComponent:()=>j});var r=s(177),c=s(9079),p=s(4774),E=s(6354),u=s(980),h=s(765),m=s(1037),f=s(9475),D=s(4958),t=s(7705),v=s(5816),R=s(6504),P=s(4710);function g(i,l){if(1&i&&t.nrm(0,"app-loader",4),2&i){const o=t.XpG();t.Y8G("isVisible",o.loading)}}function F(i,l){if(1&i){const o=t.RV6();t.j41(0,"div")(1,"app-product-form",5),t.bIt("actionEmitter",function(n){t.eBV(o);const a=t.XpG(2);return t.Njj(a.handleActions(n))}),t.k0s()()}if(2&i){const o=t.XpG(2);t.R7$(1),t.Y8G("formData",o.productDetails)}}function T(i,l){if(1&i){const o=t.RV6();t.j41(0,"div")(1,"div",6)(2,"div",7)(3,"p"),t.EFF(4,"Product Name"),t.k0s(),t.j41(5,"p",8),t.EFF(6),t.k0s()(),t.j41(7,"div",7)(8,"p"),t.EFF(9,"SKU"),t.k0s(),t.j41(10,"p",8),t.EFF(11),t.k0s()(),t.j41(12,"div",7)(13,"p"),t.EFF(14,"Category"),t.k0s(),t.j41(15,"p",8),t.EFF(16),t.k0s()(),t.j41(17,"div",7)(18,"p"),t.EFF(19,"Sub Category"),t.k0s(),t.j41(20,"p",8),t.EFF(21),t.k0s()(),t.j41(22,"div",7)(23,"p"),t.EFF(24,"Unit Type"),t.k0s(),t.j41(25,"p",8),t.EFF(26),t.k0s()(),t.j41(27,"div",7)(28,"p"),t.EFF(29,"Product Nature"),t.k0s(),t.j41(30,"p",8),t.EFF(31),t.k0s()(),t.j41(32,"div",7)(33,"p"),t.EFF(34,"Restock Threshold"),t.k0s(),t.j41(35,"p",8),t.EFF(36),t.k0s()(),t.j41(37,"div",7)(38,"p"),t.EFF(39,"Description"),t.k0s(),t.j41(40,"p",8),t.EFF(41),t.k0s()(),t.j41(42,"div",7)(43,"p"),t.EFF(44,"Status"),t.k0s(),t.j41(45,"p",8),t.EFF(46),t.k0s()()(),t.j41(47,"div",9)(48,"div",10)(49,"secondary-button",11),t.bIt("click",function(){t.eBV(o);const n=t.XpG(2);return t.Njj(n.goBack())}),t.k0s()()()()}if(2&i){const o=t.XpG(2);t.R7$(6),t.JRh(null==o.productDetails?null:o.productDetails.name),t.R7$(5),t.JRh(null==o.productDetails?null:o.productDetails.sku),t.R7$(5),t.JRh(null==o.productDetails?null:o.productDetails.category_name),t.R7$(5),t.JRh(null==o.productDetails?null:o.productDetails.sub_category_name),t.R7$(5),t.JRh(o.getLabel(null==o.productDetails?null:o.productDetails.unit_type,"unit_type")),t.R7$(5),t.SpI("",o.getLabel(null==o.productDetails?null:o.productDetails.product_nature,"product_nature")," "),t.R7$(5),t.JRh(null==o.productDetails?null:o.productDetails.restock_threshold),t.R7$(5),t.JRh(null==o.productDetails?null:o.productDetails.description),t.R7$(5),t.JRh(null==o.productDetails?null:o.productDetails.status),t.R7$(3),t.Y8G("label","Go Back")}}function M(i,l){if(1&i&&(t.j41(0,"div"),t.DNE(1,F,2,1,"div",3),t.DNE(2,T,50,10,"div",3),t.k0s()),2&i){const o=t.XpG();t.R7$(1),t.Y8G("ngIf",o.editMode),t.R7$(1),t.Y8G("ngIf",!o.editMode)}}let j=(()=>{class i{constructor(o,e,n,a,_){this._httpService=o,this._destroyRef=e,this._notificationService=n,this._activatedRoute=a,this._location=_,this.editMode=!1,this.loading=!1,this.productNatureList=[],this.unitTypes=[],this._activatedRoute.paramMap.pipe((0,E.T)(()=>window.history.state)).pipe((0,c.pQ)(this._destroyRef)).subscribe(k=>{this.editMode=k.edit})}ngOnInit(){this.loadProductDetails(),this.productNatureList=D.V.PRODUCT_NATURE,this.unitTypes=D.V.MEASUREMENT_UNITS}goBack(){this._location.back()}getLabel(o,e){let n=[];"unit_type"===e?n=this.unitTypes:"product_nature"===e&&(n=this.productNatureList);const a=n.find(_=>_.value===o);return a?a.label:"Unknown"}handleActions(o){"submit"===o.action?this.updateProductDetails(o.value):"back"===o.action&&this.goBack()}updateProductDetails(o){this.loading=!0,this._httpService.post(p.A.UPDATE_PRODUCT_DETAILS,o).pipe((0,c.pQ)(this._destroyRef),(0,u.j)(()=>this.loading=!1)).subscribe({next:e=>{this._notificationService.success("Success!",e?.body?.message),this._location.back()},error:e=>{console.log(e),this._notificationService.error("Error!",e?.error?.message)}})}loadProductDetails(){this.loading=!0,this._httpService.get(p.A.GET_PRODUCT_DETAILS,{oid:this.oid}).pipe((0,c.pQ)(this._destroyRef),(0,u.j)(()=>this.loading=!1)).subscribe({next:o=>{200===o.status&&(this.productDetails=o?.body?.data,console.log(this.productDetails))},error:o=>{console.log(o),this._notificationService.error("Error!",o?.error?.message)}})}static{this.\u0275fac=function(e){return new(e||i)(t.rXU(v.k),t.rXU(t.abz),t.rXU(R.xY),t.rXU(P.nX),t.rXU(r.aZ))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-view-product-details"]],inputs:{oid:"oid"},standalone:!0,features:[t.aNF],decls:5,vars:2,consts:[[1,"p-4","space-y-3"],[1,"text-2xl","font-medium","mb-4","animate-text"],[3,"isVisible",4,"ngIf"],[4,"ngIf"],[3,"isVisible"],[3,"formData","actionEmitter"],[1,"grid","grid-cols-1","gap-x-6","gap-y-4","md:grid-cols-3","border-[0.5px]","p-4","rounded-md"],[1,"space-y-1"],[1,"font-semibold","text-secondary"],[1,"flex","justify-end","mt-4"],[1,"flex","items-center","gap-4"],[3,"label","click"]],template:function(e,n){1&e&&(t.j41(0,"div",0)(1,"h2",1),t.EFF(2,"Product Details"),t.k0s(),t.DNE(3,g,1,1,"app-loader",2),t.DNE(4,M,3,2,"div",3),t.k0s()),2&e&&(t.R7$(3),t.Y8G("ngIf",n.loading),t.R7$(1),t.Y8G("ngIf",!n.loading&&n.productDetails))},dependencies:[r.MD,r.bT,h.V,m.F,f.t]})}}return i})()}}]);