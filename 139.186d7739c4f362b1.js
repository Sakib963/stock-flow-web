"use strict";(self.webpackChunkstock_flow_web=self.webpackChunkstock_flow_web||[]).push([[139],{3139:(E,d,n)=>{n.r(d),n.d(d,{ViewProductPurchaseComponent:()=>b});var r=n(177),o=n(9079),p=n(4774),u=n(6354),i=n(980),g=n(9475),h=n(765),l=n(8250),m=n(8734),t=n(7705),P=n(5816),D=n(6504),v=n(4710);function M(s,_){if(1&s&&t.nrm(0,"app-loader",4),2&s){const e=t.XpG();t.Y8G("isVisible",e.loading)}}function O(s,_){if(1&s){const e=t.RV6();t.j41(0,"div")(1,"app-purchase-form",6),t.bIt("actionEmitter",function(a){t.eBV(e);const f=t.XpG(2);return t.Njj(f.handleActions(a))}),t.k0s()()}if(2&s){const e=t.XpG(2);t.R7$(1),t.Y8G("formData",e.purchaseDetails)}}function C(s,_){if(1&s&&(t.qex(0),t.nrm(1,"app-single-item-card",18),t.bVm()),2&s){const e=_.$implicit;t.R7$(1),t.Y8G("itemDetails",e)("isDisplay",!0)}}function R(s,_){if(1&s){const e=t.RV6();t.j41(0,"div",7)(1,"div",8)(2,"div",9)(3,"p"),t.EFF(4,"Bill No"),t.k0s(),t.j41(5,"p",10),t.EFF(6),t.k0s()(),t.j41(7,"div",9)(8,"p"),t.EFF(9,"Date Of Purchase"),t.k0s(),t.j41(10,"p",10),t.EFF(11),t.k0s()(),t.j41(12,"div",9)(13,"p"),t.EFF(14,"Supplier"),t.k0s(),t.j41(15,"p",10),t.EFF(16),t.k0s()(),t.j41(17,"div",9)(18,"p"),t.EFF(19,"Total Amount"),t.k0s(),t.j41(20,"p",10),t.EFF(21),t.k0s()(),t.j41(22,"div",9)(23,"p"),t.EFF(24,"Special Notes"),t.k0s(),t.j41(25,"p",10),t.EFF(26),t.k0s()(),t.j41(27,"div",9)(28,"p"),t.EFF(29,"Status"),t.k0s(),t.j41(30,"p",10),t.EFF(31),t.k0s()()(),t.j41(32,"div",11)(33,"h2",12),t.EFF(34,"Products"),t.k0s(),t.j41(35,"div",13),t.DNE(36,C,2,2,"ng-container",14),t.k0s()(),t.j41(37,"div",15)(38,"div",16)(39,"secondary-button",17),t.bIt("click",function(){t.eBV(e);const a=t.XpG(2);return t.Njj(a.goBack())}),t.k0s()()()()}if(2&s){const e=t.XpG(2);t.R7$(6),t.JRh(null==e.purchaseDetails?null:e.purchaseDetails.bill_no),t.R7$(5),t.JRh(null==e.purchaseDetails?null:e.purchaseDetails.date_of_purchase_text),t.R7$(5),t.JRh(null==e.purchaseDetails?null:e.purchaseDetails.supplier_name),t.R7$(5),t.JRh(null==e.purchaseDetails?null:e.purchaseDetails.total_amount),t.R7$(5),t.JRh(null==e.purchaseDetails?null:e.purchaseDetails.special_notes),t.R7$(5),t.JRh(null==e.purchaseDetails?null:e.purchaseDetails.status),t.R7$(5),t.Y8G("ngForOf",e.products),t.R7$(3),t.Y8G("label","Go Back")}}function F(s,_){if(1&s&&(t.j41(0,"div"),t.DNE(1,O,2,1,"div",3),t.DNE(2,R,40,8,"div",5),t.k0s()),2&s){const e=t.XpG();t.R7$(1),t.Y8G("ngIf",e.editMode),t.R7$(1),t.Y8G("ngIf",!e.editMode)}}let b=(()=>{class s{constructor(e,c,a,f,x){this._httpService=e,this._destroyRef=c,this._notificationService=a,this._activatedRoute=f,this._location=x,this.editMode=!1,this.loading=!1,this.products=[],this._activatedRoute.paramMap.pipe((0,u.T)(()=>window.history.state)).pipe((0,o.pQ)(this._destroyRef)).subscribe(y=>{this.editMode=y.edit})}ngOnInit(){this.loadPurchaseDetails()}goBack(){this._location.back()}handleActions(e){"submit"===e.action?this.updatePurchaseDetails(e.value):"back"===e.action&&this.goBack()}updatePurchaseDetails(e){this.loading=!0,console.log(e)}loadPurchaseDetails(){this.loading=!0,this._httpService.get(p.A.GET_PURCHASE_DETAILS,{oid:this.oid}).pipe((0,o.pQ)(this._destroyRef),(0,i.j)(()=>this.loading=!1)).subscribe({next:e=>{200===e.status&&(this.purchaseDetails=e?.body?.data,this.products=this.purchaseDetails.products,console.log(this.purchaseDetails,"purchaseDetails"),console.log(this.products,"products"))},error:e=>{console.log(e),this._notificationService.error("Error!",e?.error?.message)}})}static{this.\u0275fac=function(c){return new(c||s)(t.rXU(P.k),t.rXU(t.abz),t.rXU(D.xY),t.rXU(v.nX),t.rXU(r.aZ))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-view-product-purchase"]],inputs:{oid:"oid"},standalone:!0,features:[t.aNF],decls:5,vars:2,consts:[[1,"p-4","space-y-3"],[1,"text-2xl","font-medium","mb-4","animate-text"],[3,"isVisible",4,"ngIf"],[4,"ngIf"],[3,"isVisible"],["class","space-y-4",4,"ngIf"],[3,"formData","actionEmitter"],[1,"space-y-4"],[1,"grid","grid-cols-1","gap-x-6","gap-y-4","md:grid-cols-3","border-[0.5px]","p-4","rounded-md"],[1,"space-y-1"],[1,"font-semibold"],[1,"border-[0.5px]","p-4","rounded-md"],[1,"text-xl","font-medium","mb-4","animate-text"],[1,"grid","grid-cols-1","gap-x-6","gap-y-4","md:grid-cols-5"],[4,"ngFor","ngForOf"],[1,"flex","justify-end","mt-4"],[1,"flex","items-center","gap-4"],[3,"label","click"],[3,"itemDetails","isDisplay"]],template:function(c,a){1&c&&(t.j41(0,"div",0)(1,"h2",1),t.EFF(2,"Product Details"),t.k0s(),t.DNE(3,M,1,1,"app-loader",2),t.DNE(4,F,3,2,"div",3),t.k0s()),2&c&&(t.R7$(3),t.Y8G("ngIf",a.loading),t.R7$(1),t.Y8G("ngIf",!a.loading&&a.purchaseDetails))},dependencies:[r.MD,r.Sq,r.bT,h.V,l.P,g.t,m.L]})}}return s})()},765:(E,d,n)=>{n.d(d,{V:()=>u});var r=n(177),o=n(7705);function p(i,g){1&i&&(o.j41(0,"div",1),o.nrm(1,"span")(2,"span")(3,"span")(4,"span")(5,"span"),o.k0s())}let u=(()=>{class i{constructor(){this.isVisible=!1,this.showLoader=!1}ngOnInit(){this.isVisible&&(this.showLoader=!0,setTimeout(()=>{this.showLoader=!1},500))}static{this.\u0275fac=function(l){return new(l||i)}}static{this.\u0275cmp=o.VBU({type:i,selectors:[["app-loader"]],inputs:{isVisible:"isVisible"},standalone:!0,features:[o.aNF],decls:1,vars:1,consts:[["class","loading",4,"ngIf"],[1,"loading"]],template:function(l,m){1&l&&o.DNE(0,p,6,0,"div",0),2&l&&o.Y8G("ngIf",m.isVisible)},dependencies:[r.MD,r.bT],styles:[".loading[_ngcontent-%COMP%]{--speed-of-animation: .9s;--gap: 6px;--first-color: #4c86f9;--second-color: #49a84c;--third-color: #f6bb02;--fourth-color: #f6bb02;--fifth-color: #2196f3;display:flex;justify-content:center;align-items:center;gap:6px}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:4px;height:50px;background:var(--first-color);animation:_ngcontent-%COMP%_scale var(--speed-of-animation) ease-in-out infinite}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){background:var(--second-color);animation-delay:-.8s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){background:var(--third-color);animation-delay:-.7s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){background:var(--fourth-color);animation-delay:-.6s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){background:var(--fifth-color);animation-delay:-.5s}@keyframes _ngcontent-%COMP%_scale{0%,40%,to{transform:scaleY(.05)}20%{transform:scaleY(1)}}"]})}}return i})()}}]);