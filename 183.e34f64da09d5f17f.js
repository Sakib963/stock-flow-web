"use strict";(self.webpackChunkstock_flow_web=self.webpackChunkstock_flow_web||[]).push([[183],{3040:(v,_,n)=>{n.d(_,{N4:()=>a,op:()=>u});var t=n(4341);function a(o){Object.values(o.controls).forEach(r=>{r.invalid&&(r.markAsDirty(),r.updateValueAndValidity({onlySelf:!0})),r instanceof t.gE&&Object.values(r.controls).forEach(i=>{i.invalid&&(i.markAsDirty(),i.updateValueAndValidity({onlySelf:!0}))}),r instanceof t.Yp&&Object.values(r.controls).forEach(i=>{i instanceof t.gE&&Object.values(i.controls).forEach(l=>{l.invalid&&(l.markAsDirty(),l.updateValueAndValidity({onlySelf:!0}))})})})}function u(o){if(o.validator){const r=o.validator({});return r&&r.required}return!1}},2530:(v,_,n)=>{n.d(_,{E:()=>f});var t=n(5312),a=n(9437),u=n(7673),e=n(7705),p=n(1626);let f=(()=>{class o{constructor(i){this.http=i,this.uploadUrl=`https://api.cloudinary.com/v1_1/${t.c.cloudinary.cloudName}/image/upload`}uploadImage(i){const l=new FormData;return l.append("file",i),l.append("upload_preset",t.c.cloudinary.uploadPreset),l.append("cloud_name",t.c.cloudinary.cloudName),l.append("folder","stockflow"),this.http.post(this.uploadUrl,l).pipe((0,a.W)(c=>(console.error("Upload failed",c),(0,u.of)({error:"Upload failed, please try again later."}))))}static{this.\u0275fac=function(l){return new(l||o)(e.KVO(p.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})()},1183:(v,_,n)=>{n.d(_,{f:()=>j});var t=n(7705),a=n(177),u=n(5286),e=n(4341),p=n(3040),f=n(1517),o=n(4177),r=n(3887),i=n(765),l=n(6475),c=n(5816),g=n(6504),C=n(2530),b=n(7529),O=n(8927),R=n(1011),y=n(1997);function z(s,E){1&s&&(t.qSk(),t.j41(0,"svg",36),t.nrm(1,"path",37),t.k0s())}function I(s,E){if(1&s&&t.nrm(0,"app-loader",38),2&s){const m=t.XpG(2);t.Y8G("isVisible",m.imgLoading)}}function U(s,E){if(1&s){const m=t.RV6();t.j41(0,"div",33),t.bIt("click",function(){t.eBV(m),t.XpG();const d=t.sdS(8);return t.Njj(d.click())}),t.DNE(1,z,2,0,"svg",34),t.DNE(2,I,1,1,"app-loader",35),t.k0s()}if(2&s){const m=t.XpG();t.R7$(1),t.Y8G("ngIf",!m.imgLoading),t.R7$(1),t.Y8G("ngIf",m.imgLoading)}}function T(s,E){1&s&&(t.j41(0,"p",39),t.EFF(1," Upload a file"),t.k0s())}function F(s,E){1&s&&(t.j41(0,"p",40),t.EFF(1,"PNG, JPG, GIF up to 10MB "),t.k0s())}function B(s,E){if(1&s&&t.nrm(0,"img",41),2&s){const m=t.XpG();t.Y8G("src",m.form.controls.photo.value,t.B4B)}}function L(s,E){if(1&s&&(t.qex(0),t.nrm(1,"nz-option",42),t.bVm()),2&s){const m=E.$implicit;t.R7$(1),t.Y8G("nzLabel",m)("nzValue",m)}}function A(s,E){if(1&s&&(t.j41(0,"nz-form-item")(1,"nz-form-label",11),t.EFF(2,"Password"),t.k0s(),t.j41(3,"nz-form-control",43),t.nrm(4,"input",44),t.k0s()()),2&s){const m=t.XpG();t.R7$(1),t.Y8G("nzRequired",m.hasRequiredValidator("password"))}}function w(s,E){1&s&&(t.j41(0,"span"),t.nrm(1,"app-spinner"),t.k0s())}function k(s,E){1&s&&(t.j41(0,"div",45)(1,"p"),t.EFF(2,"Submit"),t.k0s()())}let j=(()=>{class s{constructor(m,h,d,M,D,P){this._fb=m,this._modal=h,this._httpService=d,this._destroyRef=M,this._notificationService=D,this._fileService=P,this.actionEmitter=new t.bkB,this.loading=!1,this.imgLoading=!1,this.roleList=[],this.roleList=Object.values(r.gg)}ngOnInit(){this.form=this.createForm(),this.formData&&(this.form.patchValue(this.formData),this.form.removeControl("password"))}createForm(){return this._fb.group({oid:[null],name:[null,[e.k0.required]],email:[null,[e.k0.required]],mobile_number:[null,[e.k0.required]],role:[null,[e.k0.required]],designation:[null],photo:[null],password:[null,[e.k0.required]],status:["Active",[e.k0.required]]})}handleConfirm(){let m="Do you want to create an user?";this.formData&&(m="Do you want to update this user?"),this._modal.create({nzContent:o.M,nzData:{message:m},nzFooter:null,nzClosable:!1,nzOnOk:()=>this.actionEmitter.emit({action:"submit",value:this.form.value})})}handleForm(){this.form.valid?this.handleConfirm():(0,p.N4)(this.form)}goBack(){this.actionEmitter.emit({action:"back",value:this.form.value})}hasRequiredValidator(m){const h=this.form.get(m);return!!h&&(0,p.op)(h)}triggerFileInput(){document.querySelector("#fileInput").click()}onFileSelected(m){const h=m.target;if(h.files&&h.files[0]){const d=h.files[0];if(d.size>512e3)return void this._notificationService.error("Error","File size exceeds 500 KB. Please upload a smaller file.");this.imgLoading=!0,this._fileService.uploadImage(d).subscribe({next:D=>{this.form.controls.photo.setValue(D.secure_url),this.imgLoading=!1},error:D=>{this._notificationService.error("Error","Failed to upload image"),console.error("Image upload error:",D),this.imgLoading=!1}})}}static{this.\u0275fac=function(h){return new(h||s)(t.rXU(e.ok),t.rXU(l.N_),t.rXU(c.k),t.rXU(t.abz),t.rXU(g.xY),t.rXU(C.E))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-user-form"]],inputs:{formData:"formData",loading:"loading"},outputs:{actionEmitter:"actionEmitter"},standalone:!0,features:[t.aNF],decls:52,vars:18,consts:[[1,"rounded-md","bg-white"],["nz-form","",3,"formGroup","nzLayout","ngSubmit"],[1,"grid","grid-cols-1","gap-y-6","lg:gap-6","md:grid-cols-2","lg:grid-cols-3","border-[0.5px]","p-4","rounded-md"],[1,"p-4","border-[0.5px]","rounded-md","shadow-md","md:col-span-2","lg:col-span-1","flex","flex-col","items-center","justify-center"],["class"," flex flex-col items-center justify-center w-32 h-32 border-[0.5px] border-dashed rounded-full shadow-md cursor-pointer",3,"click",4,"ngIf"],["class","text-center text-blue-500 font-medium mt-4",4,"ngIf"],["class","text-xs text-gray-500",4,"ngIf"],["type","file","accept",".png,.jpg,.jpeg,.gif",1,"hidden",3,"change"],["fileInput",""],["class"," w-32 h-32 border-[0.5px] border-dashed rounded-full shadow-md","alt","User Photo",3,"src",4,"ngIf"],[1,"grid","grid-cols-1","gap-x-6","md:grid-cols-2","border-[0.5px]","p-4","rounded-md","col-span-2"],[3,"nzRequired"],["nzErrorTip","Name is Required."],["formControlName","name","nz-input","","placeholder","Enter Name"],["nzErrorTip","Email is Required."],["formControlName","email","nz-input","","placeholder","Enter Email Address",3,"readOnly"],["nzErrorTip","Mobile Number is Required."],["formControlName","mobile_number","nz-input","","placeholder","Enter Mobile Number"],["nzErrorTip","Role is Required."],["formControlName","role","nz-input","","nzAllowClear","","nzPlaceHolder","Select Role",1,"w-full"],[4,"ngFor","ngForOf"],["nzErrorTip","Designation is Required."],["formControlName","designation","nz-input","","placeholder","Enter Designation"],[4,"ngIf"],["nzErrorTip","Status is required."],["formControlName","status","nz-input","","nzAllowClear","","nzPlaceHolder","Select Status",1,"w-full"],["nzLabel","Active","nzValue","Active"],["nzLabel","Inactive","nzValue","Inactive"],[1,"flex","justify-end","mt-4"],[1,"flex","items-center","gap-4"],["type","button",1,"secondary-button",3,"click"],["type","submit",1,"primary-button","disabled:cursor-wait",3,"disabled"],["class","flex justify-center items-center gap-2",4,"ngIf"],[1,"flex","flex-col","items-center","justify-center","w-32","h-32","border-[0.5px]","border-dashed","rounded-full","shadow-md","cursor-pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","class","size-6",4,"ngIf"],[3,"isVisible",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-6"],["stroke-linecap","round","stroke-linejoin","round","d","M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"],[3,"isVisible"],[1,"text-center","text-blue-500","font-medium","mt-4"],[1,"text-xs","text-gray-500"],["alt","User Photo",1,"w-32","h-32","border-[0.5px]","border-dashed","rounded-full","shadow-md",3,"src"],[3,"nzLabel","nzValue"],["nzErrorTip","Password is Required."],["formControlName","password","nz-input","","placeholder","Enter Password"],[1,"flex","justify-center","items-center","gap-2"]],template:function(h,d){1&h&&(t.j41(0,"div",0)(1,"form",1),t.bIt("ngSubmit",function(){return d.handleForm()}),t.j41(2,"div",2)(3,"div",3),t.DNE(4,U,3,2,"div",4),t.DNE(5,T,2,0,"p",5),t.DNE(6,F,2,0,"p",6),t.j41(7,"input",7,8),t.bIt("change",function(D){return d.onFileSelected(D)}),t.k0s(),t.DNE(9,B,1,1,"img",9),t.k0s(),t.j41(10,"div",10)(11,"nz-form-item")(12,"nz-form-label",11),t.EFF(13,"Name"),t.k0s(),t.j41(14,"nz-form-control",12),t.nrm(15,"input",13),t.k0s()(),t.j41(16,"nz-form-item")(17,"nz-form-label",11),t.EFF(18,"Email"),t.k0s(),t.j41(19,"nz-form-control",14),t.nrm(20,"input",15),t.k0s()(),t.j41(21,"nz-form-item")(22,"nz-form-label",11),t.EFF(23,"Mobile Number"),t.k0s(),t.j41(24,"nz-form-control",16),t.nrm(25,"input",17),t.k0s()(),t.j41(26,"nz-form-item")(27,"nz-form-label",11),t.EFF(28,"Role"),t.k0s(),t.j41(29,"nz-form-control",18)(30,"nz-select",19),t.DNE(31,L,2,2,"ng-container",20),t.k0s()()(),t.j41(32,"nz-form-item")(33,"nz-form-label",11),t.EFF(34,"Designation"),t.k0s(),t.j41(35,"nz-form-control",21),t.nrm(36,"input",22),t.k0s()(),t.DNE(37,A,5,1,"nz-form-item",23),t.j41(38,"nz-form-item")(39,"nz-form-label",11),t.EFF(40,"Status"),t.k0s(),t.j41(41,"nz-form-control",24)(42,"nz-select",25),t.nrm(43,"nz-option",26)(44,"nz-option",27),t.k0s()()()()(),t.j41(45,"div",28)(46,"div",29)(47,"button",30),t.bIt("click",function(){return d.goBack()}),t.EFF(48," Cancel "),t.k0s(),t.j41(49,"button",31),t.DNE(50,w,2,0,"span",23),t.DNE(51,k,3,0,"div",32),t.k0s()()()()()),2&h&&(t.R7$(1),t.Y8G("formGroup",d.form)("nzLayout","vertical"),t.R7$(3),t.Y8G("ngIf",!d.form.controls.photo.value),t.R7$(1),t.Y8G("ngIf",!d.form.controls.photo.value),t.R7$(1),t.Y8G("ngIf",!d.form.controls.photo.value),t.R7$(3),t.Y8G("ngIf",d.form.controls.photo.value),t.R7$(3),t.Y8G("nzRequired",d.hasRequiredValidator("name")),t.R7$(5),t.Y8G("nzRequired",d.hasRequiredValidator("email")),t.R7$(3),t.Y8G("readOnly",d.formData),t.R7$(2),t.Y8G("nzRequired",d.hasRequiredValidator("mobile_number")),t.R7$(5),t.Y8G("nzRequired",d.hasRequiredValidator("role")),t.R7$(4),t.Y8G("ngForOf",d.roleList),t.R7$(2),t.Y8G("nzRequired",d.hasRequiredValidator("designation")),t.R7$(4),t.Y8G("ngIf",!d.formData),t.R7$(2),t.Y8G("nzRequired",d.hasRequiredValidator("status")),t.R7$(10),t.Y8G("disabled",d.loading),t.R7$(1),t.Y8G("ngIf",d.loading),t.R7$(1),t.Y8G("ngIf",!d.loading))},dependencies:[a.MD,a.Sq,a.bT,u.Z,b.Uq,b.e,O.CA,O.Ls,O.Mo,O.zS,R.Sy,y.ld,y.WI,e.X1,e.qT,e.me,e.BC,e.cb,e.j4,e.JD,f.t,i.V],styles:["input[type=file][_ngcontent-%COMP%]{display:none}"]})}}return s})()},2119:(v,_,n)=>{n.d(_,{j:()=>o});var t=n(177),a=n(1517),u=n(7002),e=n(7705);function p(r,i){1&r&&(e.j41(0,"span"),e.nrm(1,"app-spinner"),e.k0s())}function f(r,i){if(1&r&&(e.j41(0,"span",4),e.EFF(1),e.k0s()),2&r){const l=e.XpG();e.R7$(1),e.SpI(" ",l.label," ")}}let o=(()=>{class r{constructor(){this.type="button",this.loading=!1}static{this.\u0275fac=function(c){return new(c||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["primary-button"]],inputs:{label:"label",type:"type",loading:"loading"},standalone:!0,features:[e.aNF],decls:4,vars:5,consts:[["disableForGuest","",1,"min-w-min","group","relative","flex","items-center","gap-4","overflow-hidden","rounded-sm","bg-white","px-6","py-2","shadow","font-medium","disabled:cursor-not-allowed",3,"disabled","type"],[1,"absolute","inset-0","w-2","bg-primary","transition-all","duration-300","ease-in-out","group-hover:w-full",3,"ngClass"],[4,"ngIf"],["class","relative z-10 whitespace-nowrap text-black transition-all duration-300 group-hover:text-white",4,"ngIf"],[1,"relative","z-10","whitespace-nowrap","text-black","transition-all","duration-300","group-hover:text-white"]],template:function(c,g){1&c&&(e.j41(0,"button",0),e.nrm(1,"div",1),e.DNE(2,p,2,0,"span",2),e.DNE(3,f,2,1,"span",3),e.k0s()),2&c&&(e.Y8G("disabled",g.loading)("type",g.type),e.R7$(1),e.Y8G("ngClass",g.loading?"w-full":""),e.R7$(1),e.Y8G("ngIf",g.loading),e.R7$(1),e.Y8G("ngIf",!g.loading))},dependencies:[t.MD,t.YU,t.bT,a.t,u.x]})}}return r})()},9475:(v,_,n)=>{n.d(_,{t:()=>u});var t=n(177),a=n(7705);let u=(()=>{class e{constructor(){this.type="button"}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=a.VBU({type:e,selectors:[["secondary-button"]],inputs:{label:"label",type:"type"},standalone:!0,features:[a.aNF],decls:4,vars:1,consts:[["type","button",1,"min-w-min","group","relative","flex","items-center","gap-4","overflow-hidden","rounded-sm","bg-white","px-6","py-2","shadow","font-medium","disabled:cursor-wait"],[1,"absolute","inset-0","w-2","bg-[#8D99AE]","transition-all","duration-300","ease-in-out","group-hover:w-full"],[1,"relative","z-10","whitespace-nowrap","text-black","transition-all","duration-300","group-hover:text-white"]],template:function(o,r){1&o&&(a.j41(0,"button",0),a.nrm(1,"div",1),a.j41(2,"span",2),a.EFF(3),a.k0s()()),2&o&&(a.R7$(3),a.SpI(" ",r.label," "))},dependencies:[t.MD]})}}return e})()},4177:(v,_,n)=>{n.d(_,{M:()=>r});var t=n(177),a=n(5286),u=n(5088),e=n(6475),p=n(2119),f=n(9475),o=n(7705);let r=(()=>{class i{constructor(c,g){this.modalData=c,this._modalRef=g}handleConfirm(){this._modalRef.triggerOk()}closeModal(){this._modalRef.triggerCancel()}static{this.\u0275fac=function(g){return new(g||i)(o.rXU(e.or),o.rXU(e.J9))}}static{this.\u0275cmp=o.VBU({type:i,selectors:[["app-confirmation-modal"]],standalone:!0,features:[o.aNF],decls:7,vars:5,consts:[[1,"w-full","flex","flex-col","items-center","p-5"],["src","/assets/icons/undraw_confirmation.svg","alt","",1,"w-2/3","mx-auto"],[1,"text-black","mt-6","mb-9","font-semibold","text-lg"],[1,"flex","items-center","gap-8"],[3,"label","type","click"]],template:function(g,C){1&g&&(o.j41(0,"div",0),o.nrm(1,"img",1),o.j41(2,"p",2),o.EFF(3),o.k0s(),o.j41(4,"div",3)(5,"secondary-button",4),o.bIt("click",function(){return C.closeModal()}),o.k0s(),o.j41(6,"primary-button",4),o.bIt("click",function(){return C.handleConfirm()}),o.k0s()()()),2&g&&(o.R7$(3),o.JRh(C.modalData.message),o.R7$(2),o.Y8G("label","Cancel")("type","button"),o.R7$(1),o.Y8G("label","Confirm")("type","button"))},dependencies:[t.MD,a.Z,u.iu,p.j,f.t]})}}return i})()},765:(v,_,n)=>{n.d(_,{V:()=>e});var t=n(177),a=n(7705);function u(p,f){1&p&&(a.j41(0,"div",1),a.nrm(1,"span")(2,"span")(3,"span")(4,"span")(5,"span"),a.k0s())}let e=(()=>{class p{constructor(){this.isVisible=!1,this.showLoader=!1}ngOnInit(){this.isVisible&&(this.showLoader=!0,setTimeout(()=>{this.showLoader=!1},500))}static{this.\u0275fac=function(r){return new(r||p)}}static{this.\u0275cmp=a.VBU({type:p,selectors:[["app-loader"]],inputs:{isVisible:"isVisible"},standalone:!0,features:[a.aNF],decls:1,vars:1,consts:[["class","loading",4,"ngIf"],[1,"loading"]],template:function(r,i){1&r&&a.DNE(0,u,6,0,"div",0),2&r&&a.Y8G("ngIf",i.isVisible)},dependencies:[t.MD,t.bT],styles:[".loading[_ngcontent-%COMP%]{--speed-of-animation: .9s;--gap: 6px;--first-color: #4c86f9;--second-color: #49a84c;--third-color: #f6bb02;--fourth-color: #f6bb02;--fifth-color: #2196f3;display:flex;justify-content:center;align-items:center;gap:6px}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:4px;height:50px;background:var(--first-color);animation:_ngcontent-%COMP%_scale var(--speed-of-animation) ease-in-out infinite}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){background:var(--second-color);animation-delay:-.8s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){background:var(--third-color);animation-delay:-.7s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){background:var(--fourth-color);animation-delay:-.6s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){background:var(--fifth-color);animation-delay:-.5s}@keyframes _ngcontent-%COMP%_scale{0%,40%,to{transform:scaleY(.05)}20%{transform:scaleY(1)}}"]})}}return p})()},1517:(v,_,n)=>{n.d(_,{t:()=>u});var t=n(177),a=n(7705);let u=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=a.VBU({type:e,selectors:[["app-spinner"]],standalone:!0,features:[a.aNF],decls:3,vars:0,consts:[["fill","none","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"-ml-1","mr-3","h-5","w-5","animate-spin","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z","fill","currentColor",1,"opacity-75"]],template:function(o,r){1&o&&(a.qSk(),a.j41(0,"svg",0),a.nrm(1,"circle",1)(2,"path",2),a.k0s())},dependencies:[t.MD]})}}return e})()},7002:(v,_,n)=>{n.d(_,{x:()=>u});var t=n(7705),a=n(3769);let u=(()=>{class e{constructor(f,o,r){this.el=f,this.renderer=o,this.authService=r}ngOnInit(){this.authService.getGuestUserStatus()&&this.renderer.setAttribute(this.el.nativeElement,"disabled","true")}static{this.\u0275fac=function(o){return new(o||e)(t.rXU(t.aKT),t.rXU(t.sFG),t.rXU(a.u))}}static{this.\u0275dir=t.FsC({type:e,selectors:[["","disableForGuest",""]],standalone:!0})}}return e})()}}]);